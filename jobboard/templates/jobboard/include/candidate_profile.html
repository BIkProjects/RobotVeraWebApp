{% load jobboard_tags %}

<div uk-grid>
    <div class="uk-width-1-5">
        <div>
            {% with role_object.profile.photo as photo %}
                {% if photo %}
                    <img class="uk-border-rounded" style="width: 100%" src="{{ photo.url }}"/>
                {% else %}
                    <img class="uk-border-rounded" style="width: 100%;"
                         src="https://blog.stylingandroid.com/wp-content/themes/lontano-pro/images/no-image-slide.png"
                         alt="">
                {% endif %}
            {% endwith %}
        </div>
    </div>
    <div class="uk-width-4-5">
        <table data-hint="main_info" class="uk-table uk-table-divider uk-table-small" width="100%">
            <colgroup>
                <col width="20%">
                <col width="80%">
            </colgroup>
            <tr>
                <td>Name:</td>
                <td>{{ role_object.full_name }}</td>
            </tr>
            <tr>
                <td>Tax number:</td>
                <td>{{ role_object.tax_number }}</td>
            </tr>
            {% with role_object.profile as profile %}
                {% if profile %}
                    <tr>
                        <td>Info:</td>
                        <td>
                            {% if role_object == profile.candidate %}
                                <a class="uk-align-right uk-margin-remove-bottom"
                                   href="{% url 'cv_edit' %}"
                                   uk-icon="icon: file-edit; ratio: 0.6"></a>
                            {% endif %}
                            <div>
                                {{ profile.sex|title }}{% if profile.birth_date %},
                                    {{ profile.birth_date|date:'d E Y' }}
                                    year of
                                    birth{% endif %}{% if profile.level %}, education level:
                                    {{ profile.level.title|lower }}{% endif %}
                            </div>
                            <div>
                                {{ profile.address|title }}{% if profile.relocation %},
                                    ready for transfer{% endif %}{% if profile.official_journey %}, ready for official
                                    journey{% endif %}
                            </div>

                        </td>
                    </tr>
                {% endif %}
            {% endwith %}
            {% if role_object.profile %}
                <tr>
                    <td>Profile uuid:</td>
                    <td>{{ role_object.profile.uuid }}</td>
                </tr>
            {% endif %}
            <tr data-hint="contract_address">
                <td>Contract address:</td>
                <td>
                    {% if role_object.contract_address is not None %}
                        <img style="width: 16px; height: 16px;"
                             src="{{ role_object.contract_address|get_blockies_png }}" alt="">
                        <a class="uk-link-reset" target="_blank"
                           href="https://rinkeby.etherscan.io/address/{{ role_object.contract_address }}">{{ role_object.contract_address }}</a>
                    {% else %}
                        <div uk-spinner="ratio: 0.7"></div>
                    {% endif %}
                </td>
            </tr>
            <tr data-hint="balance">
                <td>Balance:</td>
                <td>
                    {% get_balance role_object.user role_object.contract_address role %}
                </td>
            </tr>
        </table>
    </div>
</div>
<hr class="uk-divider-icon">
<div>
    {% with role_object.profile as profile %}
        {% if profile.position %}
            <div class="uk-article">
                <p class="uk-text-lead">{{ profile.position.title }}
                    {% if role_object == profile.candidate %}
                        <a href="{% url 'position_edit' %}"
                           uk-icon="icon: file-edit"></a>
                    {% endif %}
                </p>
                Salary from: {{ profile.position.salary_from }}$
                <ul class="uk-list uk-list-bullet">
                    <li>{{ profile.position.busyness.all|join:', ' }}</li>
                    <li>{{ profile.position.schedule.all|join:', ' }}</li>
                </ul>
                {% if profile.position.description %}
                    <p>
                        {{ profile.position.description|safe }}
                    </p>
                {% endif %}
                {% if profile.position.carier_start %}
                    <div class="chip blue white-text uk-align-right">Career start</div>
                {% endif %}
            </div>
        {% else %}
            <div>
                <p>Career objective information is not available </p>
            </div>
            <a href="{% url 'new_position' %}"
               class="uk-button uk-button-default uk-align-right uk-button-small" id="career_objective">Add career objective</a>
            <div class="clearfix"></div>
            <br/>
        {% endif %}
        <hr class="uk-divider-icon">
        {% with profile.experience.all as experiences %}
            {% if experiences %}
                <div>
                    <p class="uk-text-lead">Experience</p>
                    {% for experience in experiences %}
                        {% include 'candidateprofile/include/experience.html' %}
                    {% endfor %}
                </div>
            {% else %}
                <div>
                    <div>
                        <p>Experience information is not available </p>
                    </div>
                </div>
            {% endif %}
            <a href="{% url 'new_experience' %}"
               class="uk-button uk-button-default uk-align-right uk-button-small" id="add_experience_info">Add
                experience info</a>
            <div class="uk-clearfix"></div>
        {% endwith %}
        <hr class="uk-divider-icon">
        {% with profile.education.all as educations %}
            {% if educations %}
                <div>
                    <p class="uk-text-lead">Education</p>
                    {% for education in educations %}
                        {% include 'candidateprofile/include/education.html' %}
                    {% endfor %}
                </div>
            {% else %}
                <div>
                    <div>
                        <p>Education information is not available</p>
                    </div>
                </div>
            {% endif %}
            <a href="{% url 'new_education' %}"
               class="uk-button uk-button-default uk-align-right uk-button-small" id="add_education_info">Add education info</a>
            <div class="uk-clearfix"></div>
        {% endwith %}
        <hr class="uk-divider-icon">
        {% with profile.languages.all as languages %}
            {% if languages %}
                <div>
                    <p class="uk-text-lead">Languages</p>
                    {% for language in languages %}
                        {% include 'candidateprofile/include/languages.html' %}
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
    {% endwith %}
</div>



{% for item in role_object.profile.specialisations.all %}
    <div class="chip">{{ item }}</div>
{% endfor %}

{% if role_object.contract_address %}
    {% get_facts role_object %}
    {% if role_object|is_oracle_agent %}
        {% include 'jobboard/include/add_fact.html' %}
    {% endif %}
    {% get_candidate_vacancies role_object %}
{% endif %}


